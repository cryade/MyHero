<div class="container d-flex flex-column">
  <div class="d-flex flex-column mr-5">
    <div id="avatarPlaceholder"></div>

    <ul class="nav nav-tabs">
      <li class="nav-item">
        <a class="nav-link active" data-toggle="tab" href="#infobox">General</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#mybookings">My bookings</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-toggle="tab" href="#myratings">My ratings</a>
      </li>
    </ul>

    <div id="profileTabContent" class="tab-content">
      <div id="infobox" class="tab-pane fade active show">
        <p>
          Leaving a field empty will remove the corresponding info from your
          profile.<br />
          Fields marked with * may not be left empty.
        </p>
        <form [formGroup]="editForm" (ngSubmit)="onSubmit(editForm.value)">
          <div class="d-flex flex-column form-group">
            <label><h5>Username *</h5></label>
            <input
              type="text"
              placeholder="Username"
              id="username"
              class="form-control mb-4"
              formControlName="userName"
              disabled
              required
            />
            <label><h5>First Name</h5></label>
            <input
              type="text"
              placeholder="First Name"
              id="firstname"
              class="form-control mb-4"
              formControlName="firstName"
            />
            <label><h5>Last Name</h5></label>
            <input
              type="text"
              placeholder="Last Name"
              id="lastname"
              class="form-control mb-4"
              formControlName="lastName"
            />
            <label><h5>Birthday</h5></label>
            <input
              type="date"
              placeholder="DD-MM-YYYY"
              id="birthday"
              class="form-control mb-4"
              formControlName="birthdate"
            />
            <label><h5>Email *</h5></label>
            <input
              type="text"
              class="form-control mb-4"
              id="email"
              placeholder="email@example.com"
              formControlName="email"
              required
            />
            <label><h5>Streetname</h5></label>
            <input
              type="text"
              class="form-control mb-4"
              id="streetname"
              placeholder="Streetname"
              formControlName="street"
            />
            <label><h5>HouseNr.</h5></label>
            <input
              type="number"
              class="form-control mb-4"
              id="houseNr"
              formControlName="houseNr"
              placeholder="House number"
            />
            <label><h5>Postal Code</h5></label>
            <input
              type="number"
              class="form-control mb-4"
              id="postalCode"
              formControlName="postalCode"
              placeholder="Postal code"
            />
            <label><h5>City</h5></label>
            <input
              type="text"
              class="form-control mb-4"
              id="city"
              formControlName="city"
              placeholder="City"
            />
            <div class="mt-3">
              <button
                class="btn btn-primary"
                type="submit"
                [disabled]="!editForm.valid"
              >
                Update
              </button>
            </div>
          </div>
        </form>
      </div>

      <!-- Tabcontent for "My bookings" -->
      <div id="mybookings" class="tab-pane fade">
        <div class="row align-items-center">
          <div class="col-12">
            <ul class="list-group hero-list">
              <!-- iterate through all heroes the user has booked before and put them in the list -->
              <li
                class="list-group-item"
                *ngFor="let hero of user.bookedHeroes"
              >
                <div class="justify-content-between row">
                  <div class="col-2 d-none d-sm-inline avatar">
                    <img src="../../../assets/almight_placeholder.jpg" />
                  </div>
                  <div class="col-10 col-sm-8">
                    <p>
                      Alias: {{ hero.heroname }} <br />
                      Location: {{ hero.location }} <br />
                      Bio: {{ hero.description }} <br />
                      Categories:
                    </p>
                    <ul>
                      <li *ngFor="let category of hero.category">
                        {{ category.name }}
                      </li>
                    </ul>
                  </div>
                </div>

                <div>
                  <h4>Leave a rating!</h4>
                  <form
                    [formGroup]="rateForm"
                    (ngSubmit)="rateHero(hero, rateForm.value)"
                  >
                    <div class="form-group">
                      <label>Title</label>
                      <input
                        type="text"
                        class="form-control mb-2"
                        placeholder="Title"
                        formControlName="title"
                      />

                      <label>Comment</label>
                      <textarea
                        class="form-control mb-2"
                        placeholder="Tell us about your experience with this hero!"
                        formControlName="comment"
                      ></textarea>

                      <label for="exampleSelect1">Stars</label>
                      <select
                        class="form-control mb-2"
                        formControlName="starRating"
                      >
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                      </select>
                      <button
                        class="btn btn-secondary"
                        type="submit"
                        [disabled]="!rateForm.valid"
                      >
                        Submit!
                      </button>
                    </div>
                  </form>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div id="myratings" class="tab-pane fade">
        <div class="row align-items-center">
          <div class="col-12">
            <ul class="list-group hero-list">
              <li class="list-group-item" *ngFor="let rating of user.ratings">
                <div class="justify-content-between row">
                  
                  <div class="col-sm-10">
                    <h5>{{ rating.title }}</h5>
                    <br />
                    <h6 class="text-secondary">{{ rating.rating }}/5 Stars</h6>
                    <p class="text-primary mb-2">
                      {{ rating.description }} <br />
                      <br />
                     For: [Hero's name, but it didn't work]
                    </p>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
